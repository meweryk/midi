<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–æ–ª–æ–∫–æ–ª—å–Ω—ã–π –∑–≤—É–∫ + –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      padding: 5px;
      max-width: 800px;
      margin: 0 auto;
      background-color: #f8f9fa;
      font-size: 0.85rem;
    }
    .card {
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
      margin-bottom: 10px;
      border: none;
    }
    canvas {
      width: 100%;
      height: 200px;
      background: #000;
      display: block;
      margin-top: 20px;
      border-radius: 4px;
    }
    .btn-group-custom {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
    }
    .btn-group-custom .btn {
      flex: 1;
      min-width: 120px;
    }
    .info-text {
      font-size: 0.8rem;
      color: #495057;
    }
    .input-group-custom {
      display: flex;
      gap: 5px;
    }
    .input-group-custom > * {
      flex: 1;
    }
    .form-control {
    transition: 
    background-color 0.3s ease,
    border-color 0.3s ease,
    box-shadow 0.3s ease;
    }
    
    .form-control:focus {
    background-color: #f1f8e9;
    border-color: #4fc3f7;
    box-shadow: 0 0 8px rgba(79, 195, 247, 0.6);
    }
    
    footer {
      margin-top: 20px;
      padding-top: 10px;
      border-top: 1px solid #dee2e6;
      text-align: center;
      font-size: 0.8rem;
      color: #6c757d;
    }
    /* –£–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã –∏ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –≤ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–µ */
    #chakrasAccordion .accordion-button {
    padding: 0.6rem 0.5rem;
    font-size: 0.9rem;
    }
  
    /* –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–ª–æ */
  </style>
</head>
<body>
  <div class="container-fluid p-0">
    <div class="card p-0 mb-2">
      <h5 class="mb-3 mt-2 text-center">üîî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ö–æ–ª–æ–∫–æ–ª—å–Ω–æ–≥–æ –ó–≤—É–∫–∞</h6>

      <div class="mb-3 mt-1">
        <label class="form-label mb-1"><b>–í—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:</b></label>
        <select class="form-select form-select-sm" id="instrument">
          <option value="bell">–ö–æ–ª–æ–∫–æ–ª</option>
          <option value="bowl">–ß–∞—à–∞</option>
          <option value="smallbell">–ö–æ–ª–æ–∫–æ–ª—å—á–∏–∫</option>
          <option value="custom">–°–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label mb-1"><b>–û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ (–ì—Ü):</b></label>
        <input type="number" class="form-control form-control-sm" id="freq" value="500">
      </div>

      <div class="mb-3">
        <label class="form-label mb-1"><b>–û–±–µ—Ä—Ç–æ–Ω–∞ (–º–Ω–æ–∂–∏—Ç–µ–ª—å:–∞–º–ø–ª–∏—Ç—É–¥–∞):</b></label>
        <textarea class="form-control form-control-sm" id="partials" rows="1" style="resize: none; overflow-y: hidden;" oninput="this.style.height='auto'; this.style.height=this.scrollHeight+'px'">1:0.4, 2:1.0, 2.4:0.6, 3:0.3, 4:0.2, 6:0.1, 8:0.05</textarea>
      </div>

      <div class="mb-3">
        <label class="form-label mb-1"><b>–ù–∞–±–æ—Ä —á–∞—Å—Ç–æ—Ç (–ì—Ü, —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</b></label>
        <input class="form-control form-control-sm" id="setFrequencies" placeholder="500, 625, 750">
      </div>

      <div class="mb-3 form-check form-switch">
        <input class="form-check-input" type="checkbox" id="loopSet" checked>
        <label class="form-check-label" for="loopSet">–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ</label>
      </div>

      <div class="input-group-custom mb-3">
        <div>
          <label class="form-label mb-1"><small>–ü–∞—É–∑–∞ –º–µ–∂–¥—É —É–¥–∞—Ä–∞–º–∏ (–º—Å)</small></label>
          <input type="number" class="form-control form-control-sm" id="hitDelay" value="1000">
        </div>
        <div>
          <label class="form-label mb-1"><small>–ü–∞—É–∑–∞ –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ (–º—Å)</small></label>
          <input type="number" class="form-control form-control-sm" id="cycleDelay" value="3000">
        </div>
      </div>

      <div class="btn-group-custom mb-2">
        <button id="toggle" class="btn btn-success btn-sm">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç</button>
        <button id="save" class="btn btn-outline-primary btn-sm">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å WAV</button>
        <button id="playSet" class="btn btn-primary btn-sm">üîî –ü—Ä–æ–∏–≥—Ä–∞—Ç—å –Ω–∞–±–æ—Ä</button>
      </div>
    </div>

    <canvas id="spectrum"></canvas>

    <div class="card p-3 mt-3">
      <p class="info-text">–ß–∞—Å—Ç–æ—Ç—ã –∑–≤—É–∫–æ–≤ —Ü–µ—Ä–∫–æ–≤–Ω—ã—Ö –∫–æ–ª–æ–∫–æ–ª–æ–≤ –º–æ–≥—É—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —à–∏—Ä–æ–∫–∏—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö, –Ω–æ –æ–±—ã—á–Ω–æ –æ–Ω–∏ –ª–µ–∂–∞—Ç –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 60 –ì—Ü –¥–æ 2000 –ì—Ü. –ó–≤—É—á–∞–Ω–∏–µ –∫–æ–ª–æ–∫–æ–ª–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, —Ñ–æ—Ä–º—ã, —Ç–æ–ª—â–∏–Ω—ã —Å—Ç–µ–Ω–æ–∫, –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∏, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –µ–≥–æ —É–¥–∞—Ä—è—é—Ç.</p>
      <p class="info-text"><b>–ë–ª–∞–≥–æ–≤–µ—Å—Ç–Ω–∏–∫ (—Å–∞–º—ã–π –±–æ–ª—å—à–æ–π –∫–æ–ª–æ–∫–æ–ª):</b></p>
      <p class="info-text">–ß–∞—Å—Ç–æ—Ç–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç 60 –ì—Ü –¥–æ 200 –ì—Ü. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –†–æ—Å—Ç–æ–≤—Å–∫–æ–º –∫—Ä–µ–º–ª–µ –∫–æ–ª–æ–∫–æ–ª "–°—ã—Å–æ–π" (2000 –ø—É–¥–æ–≤) –∏–º–µ–µ—Ç —á–∞—Å—Ç–æ—Ç—É 131 –ì—Ü, –∞ –∫–æ–ª–æ–∫–æ–ª "–õ–µ–±–µ–¥—å" (500 –ø—É–¥–æ–≤) - 196 –ì—Ü, —Å–æ–æ–±—â–∞–µ—Ç —Å–∞–π—Ç –ï–ª—å–∫–∏–Ω–∞.</p>
      <p class="info-text">–ù–∞ —Å–∞–π—Ç–µ <a href="https://www.planetware.de/octave/" target="_blank">Planetware</a> –ø—Ä–∏–≤–µ–¥—ë–Ω —Å–ø–∏—Å–æ–∫ —á–∞—Å—Ç–æ—Ç –ø–ª–∞–Ω–µ—Ç –Ω–∞—à–µ–π —Å–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã - —ç—Ç–æ –ø–µ—Ä–∏–æ–¥—ã –æ–±—Ä–∞—â–µ–Ω–∏—è –æ–∫—Ç–∞–≤–Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –¥–æ –∑–≤—É–∫–æ–≤–∞–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞.<br>
      –≠—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç —á–∞—Å—Ç–æ—Ç—ã –≤ –≥–µ—Ä—Ü–∞—Ö: 126.22, 141.27, 221.23, 144.72, 194.18, 210.42, 136.10, 183.58, 147.85, 207.36, 211.44, 140.64, 172.06. –¢–∞–º –∂–µ –µ—Å—Ç—å –∑–≤—É—á–∞–Ω–∏–µ —ç—Ç–∏—Ö —á–∞—Å—Ç–æ—Ç –Ω–∞ —á–∞—à–∞—Ö, –Ω–æ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã—Ö –≤ 2 —Ä–∞–∑–∞.</p>
      <p>–ß–∞—Å—Ç–æ—Ç—ã —Å–æ–ª—å—Ñ–µ–¥–∂–∏–æ: 174, 285, 396, 417, 528, 639, 741, 852, 963.</p>
      <p class="info-text"><b>–°–æ–≤–µ—Ç:</b> –ü–æ–¥–±–∏—Ä–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–≤–∞–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞, —á—Ç–æ–± –¥–æ–±–∏—Ç—å—Å—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –∑–≤—É–∫–∞. –°—É–º–º–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∞–º–ø–ª–∏—Ç—É–¥ –æ–±–µ—Ä—Ç–æ–Ω–æ–≤ –Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–µ–≤—ã—à–∞—Ç—å 2.7.<br>
      –ü—Ä–∏–º–µ—Ä –æ–±–µ—Ä—Ç–æ–Ω–æ–≤ –¥–ª—è —á–∞—à:<br>
      1:1, 2.1:0.7, 3.2:0.5, 4.5:0.3, 5.8:0.1, 7:0.03, 11: 0.02<br>
      –∏–ª–∏ —ç—Ç–æ—Ç:<br>
      0.6:0.4, 1:1, 2.03:0.1, 2.87:0.5, 5.37:0.3, 8.57:0.2, 11.95:0.05, 21.24:0.05, 49.243:0.01</p>
      
    </div>
    
    <div class="container">
    <div class="header">
    <h5><i class="fas fa-music me-2"></i>–ß–∞—Å—Ç–æ—Ç—ã –ß–∞–∫—Ä –í–æ–∑–Ω–µ—Å–µ–Ω–∏—è</h5>
    <p class="subtitle">–¶–µ–ª–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–±—Ä–∞—Ü–∏–∏ –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏–∑–∞—Ü–∏–∏ —ç–Ω–µ—Ä–≥–∏–∏</p>
    </div>
    
    <div class="accordion" id="chakrasAccordion">
    <!-- –ù—É–ª–µ–≤–∞—è —á–∞–∫—Ä–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingOne">
    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
    <span class="frequency-badge">174 –ì—Ü - –ù—É–ª–µ–≤–∞—è —á–∞–∫—Ä–∞</span> 
    </button>
    </h5>
    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-mountain"></i>
    </div>
    <div>
    <h6>–ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h6>
    <p class="mb-1">–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–µ—Å—Ç–µ—Ç–∏–∫: —É–º–µ–Ω—å—à–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∏ –¥—É—à–µ–≤–Ω—É—é –±–æ–ª—å, —Å–æ–∑–¥–∞—ë—Ç —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ë–∞–∑–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —Å–µ–∞–Ω—Å–∞–º.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –ú—É–ª–∞–¥—Ö–∞—Ä–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingTwo">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
    <span class="frequency-badge">285 –ì—Ü - –ú—É–ª–∞–¥—Ö–∞—Ä–∞</span> 
    </button>
    </h5>
    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-seedling"></i>
    </div>
    <div>
    <h6>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∫–∞–Ω–µ–π –∏ –æ–º–æ–ª–æ–∂–µ–Ω–∏–µ</h6>
    <p class="mb-1">–£—Å–∫–æ—Ä—è–µ—Ç —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–ª–µ—Ç–æ–∫, "–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç" –ø–∞–º—è—Ç—å –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤. –û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –æ—Ç —á—É–≤—Å—Ç–≤–∞ –≤–∏–Ω—ã.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –°–≤–∞–¥—Ö–∏—Å—Ç–∞–Ω–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingThree">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
    <span class="frequency-badge">396 –ì—Ü - –°–≤–∞–¥—Ö–∏—Å—Ç–∞–Ω–∞</span> 
    </button>
    </h5>
    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-water"></i>
    </div>
    <div>
    <h6>–°–Ω—è—Ç–∏–µ —Å—Ç—Ä–∞—Ö–æ–≤ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º</h6>
    <p class="mb-1">–£—Å—Ç—Ä–∞–Ω—è–µ—Ç –ø–æ–¥—Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–µ –±–ª–æ–∫–∏, —Å—Ç—Ä–∞—Ö–∏, –ª–æ–∂–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏. –ü–æ–º–æ–≥–∞–µ—Ç –ø—Ä–µ–æ–¥–æ–ª–µ—Ç—å —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã –∏ –ø—Ä–∏–≤–ª–µ—á—å —É—Å–ø–µ—Ö.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –ú–∞–Ω–∏–ø—É—Ä–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header " id="headingFour">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
    <span class="frequency-badge">417 –ì—Ü - –ú–∞–Ω–∏–ø—É—Ä–∞</span> 
    </button>
    </h5>
    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-sun"></i>
    </div>
    <div>
    <h6>–ê–∫—Ç–∏–≤–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–∏–∏ –∏ –∏–Ω–∏—Ü–∏–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω</h6>
    <p class="mb-1">–°—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏: –ª–æ–º–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã –ø–æ–≤–µ–¥–µ–Ω–∏—è, –æ–±–ª–µ–≥—á–∞–µ—Ç –ø—Ä–∏–Ω—è—Ç–∏–µ –ø–µ—Ä–µ–º–µ–Ω.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –ê–Ω–∞—Ö–∞—Ç–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingFive">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
    <span class="frequency-badge">528 –ì—Ü - –ê–Ω–∞—Ö–∞—Ç–∞</span> 
    </button>
    </h5>
    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-heart"></i>
    </div>
    <div>
    <h6>–ò—Å—Ü–µ–ª–µ–Ω–∏–µ –î–ù–ö –∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –ª—é–±–≤–∏</h6>
    <p class="mb-1">–ö–ª—é—á–µ–≤–∞—è "—á–∞—Å—Ç–æ—Ç–∞ –î–ù–ö": –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω–æ–π –î–ù–ö. –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ –∏ –ª—é–±–æ–≤—å.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –í–∏—à—É–¥–¥—Ö–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingSix">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
    <span class="frequency-badge">639 –ì—Ü - –í–∏—à—É–¥–¥—Ö–∞</span> 
    </button>
    </h5>
    <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-comments"></i>
    </div>
    <div>
    <h6>–ì–∞—Ä–º–æ–Ω–∏–∑–∞—Ü–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ –±–µ–∑—É—Å–ª–æ–≤–Ω–∞—è –ª—é–±–æ–≤—å</h6>
    <p class="mb-1">–ì–∞—Ä–º–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —Ä–∞–∑–≤–∏–≤–∞–µ—Ç —ç–º–ø–∞—Ç–∏—é –∏ —Ç–µ—Ä–ø–∏–º–æ—Å—Ç—å. –ü–æ–º–æ–≥–∞–µ—Ç –≤ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–≤—è–∑–µ–π.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –ê–¥–∂–Ω–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingSeven">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
    <span class="frequency-badge">741 –ì—Ü - –ê–¥–∂–Ω–∞</span> 
    </button>
    </h5>
    <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-eye"></i>
    </div>
    <div>
    <h6>–û—á–∏—â–µ–Ω–∏–µ –∏ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</h6>
    <p class="mb-1">–û—á–∏—â–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–º –æ—Ç —Ç–æ–∫—Å–∏–Ω–æ–≤ –∏ –º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö "–ø–∞—Ä–∞–∑–∏—Ç–æ–≤". –£—Å–∏–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç—É–∏—Ü–∏—é, –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–π—Ç–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –°–∞—Ö–∞—Å—Ä–∞—Ä–∞ -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingEight">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
    <span class="frequency-badge">852 –ì—Ü - –°–∞—Ö–∞—Å—Ä–∞—Ä–∞</span> 
    </button>
    </h5>
    <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-crown"></i>
    </div>
    <div>
    <h6>–ê–∫—Ç–∏–≤–∞—Ü–∏—è –∏–Ω—Ç—É–∏—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π</h6>
    <p class="mb-1">–ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –≤—ã—Å—à–∏–µ –ø—Å–∏—Ö–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: —è—Å–Ω–æ–≤–∏–¥–µ–Ω–∏–µ, –∏–Ω—Ç—É–∏—Ü–∏—é. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–≤—è–∑–∏.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- –ù–∞–¥–∫–æ—Ä–æ–Ω–Ω–∞—è -->
    <div class="accordion-item">
    <h5 class="accordion-header" id="headingNine">
    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
    <span class="frequency-badge">963 –ì—Ü - –ù–∞–¥–∫–æ—Ä–æ–Ω–Ω–∞—è</span>  —á–∞–∫—Ä–∞
    </button>
    </h5>
    <div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine" data-bs-parent="#chakrasAccordion">
    <div class="accordion-body">
    <div class="chakra-info">
    <div class="chakra-icon">
    <i class="fas fa-star"></i>
    </div>
    <div>
    <h6>–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –≤—ã—Å—à–∏–º —Å–æ–∑–Ω–∞–Ω–∏–µ–º</h6>
    <p class="mb-1">–û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞–Ω–∞–ª —Å–≤—è–∑–∏ —Å –≤—ã—Å—à–∏–º–∏ —Å–∏–ª–∞–º–∏, —Å—Ç–∏—Ä–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É –ª–∏—á–Ω–æ—Å—Ç—å—é –∏ –∫–æ—Å–º–æ—Å–æ–º.</p>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <div class="footer text-center">
    <p>–î–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ—Ç –≤ –Ω–∞—É—à–Ω–∏–∫–∞—Ö –ø–æ 15-30 –º–∏–Ω—É—Ç –≤ –¥–µ–Ω—å</p>
    </div>
    </div>
    
    <div class="text-center mb-2">
    <a href="http://www.mif-ua.com/m/archive/article/51055" target="_blank">–ü—Ä–æ –∫–æ–ª–æ–∫–æ–ª–∞</a><br>
    <a href="https://meweryk.github.io/Wave-of-land/index.html" target="_blank">–ï—â—ë –ø—Ä–æ–µ–∫—Ç—ã</a>
    </div>
    <div class="text-center">
    <p class="mb-0">¬© –ê–≤—Ç–æ—Ä</p>
    </div>
    
  </div>

  <!-- Bootstrap JS (–Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  	
  <script>
    const instrumentPresets = {
      bell: '1:0.4, 2:1.0, 2.4:0.6, 3:0.3, 4:0.2, 6:0.1, 8:0.05',
      bowl: '1:0.5, 1.5:1.0, 2:0.7, 2.5:0.4, 3:0.2',
      smallbell: '1:1.0, 2:0.6, 3:0.3, 4:0.1',
      /*custom: '1:0.4, 2:1.0, 2.4:0.4, 3:0.2, 4:0.1, 6:0.05, 8:0.02'*/
    };

    const instrumentSelect = document.getElementById('instrument');
    instrumentSelect.addEventListener('change', () => {
      if (instrumentSelect.value !== 'custom') {
        document.getElementById('partials').value = instrumentPresets[instrumentSelect.value];
      }
    });

    const freqInput = document.getElementById('freq');
    const partialsInput = document.getElementById('partials');
    const toggleBtn = document.getElementById('toggle');
    const saveBtn = document.getElementById('save');
    const playSetBtn = document.getElementById('playSet');
    const canvas = document.getElementById('spectrum');
    const ctxCanvas = canvas.getContext('2d');
    const setFreqsInput = document.getElementById('setFrequencies');
    const loopCheckbox = document.getElementById('loopSet');
    const hitDelayInput = document.getElementById('hitDelay');
    const cycleDelayInput = document.getElementById('cycleDelay');

    let audioCtx;
    let gainNodes = [];
    let oscillators = [];
    let analyser;
    let isPlaying = false;
    let isPlayingSet = false;

    const MAX_VOLUME = 0.34;
    const ATTACK = 0.01;
    const RELEASE = 5.5;

    function parsePartials(inputText) {
      return inputText.split(',').map(p => {
        const [r, a] = p.trim().split(':').map(Number);
        return (!isNaN(r) && !isNaN(a)) ? { ratio: r, amp: a } : null;
      }).filter(Boolean);
    }

    function createImpulseResponse(ctx, duration = 3, decay = 2) {
      const len = ctx.sampleRate * duration;
      const buffer = ctx.createBuffer(2, len, ctx.sampleRate);
      for (let ch = 0; ch < 2; ch++) {
        const data = buffer.getChannelData(ch);
        for (let i = 0; i < len; i++) {
          data[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / len, decay);
        }
      }
      return buffer;
    }

    function drawSpectrum() {
      if (!analyser) return;
      requestAnimationFrame(drawSpectrum);
      const bufferLength = analyser.frequencyBinCount;
      const data = new Uint8Array(bufferLength);
      analyser.getByteFrequencyData(data);

      ctxCanvas.clearRect(0, 0, canvas.width, canvas.height);
      ctxCanvas.fillStyle = '#0f0';
      const barWidth = canvas.width / bufferLength;
      for (let i = 0; i < bufferLength; i++) {
        const barHeight = data[i];
        ctxCanvas.fillRect(i * barWidth, canvas.height - barHeight, barWidth, barHeight);
      }
    }

    function startBell(f0, partials) {
      return new Promise(resolve => {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        const convolver = audioCtx.createConvolver();
        convolver.buffer = createImpulseResponse(audioCtx);

        analyser = audioCtx.createAnalyser();
        analyser.fftSize = 2048;

        const masterGain = audioCtx.createGain();
        masterGain.gain.value = 1.0;
        convolver.connect(masterGain).connect(analyser).connect(audioCtx.destination);

        const now = audioCtx.currentTime;

        partials.forEach(p => {
          const osc = audioCtx.createOscillator();
          const gain = audioCtx.createGain();

          const vibrato = audioCtx.createOscillator();
          const vibratoGain = audioCtx.createGain();

          osc.type = 'sine';
          osc.frequency.value = f0 * p.ratio + (Math.random() * 2 - 1);

          vibrato.frequency.value = 5 + Math.random() * 2;
          vibratoGain.gain.value = 1 + Math.random();

          vibrato.connect(vibratoGain).connect(osc.frequency);
          vibrato.start(now);

          gain.gain.setValueAtTime(0, now);
          gain.gain.linearRampToValueAtTime(MAX_VOLUME * p.amp, now + ATTACK);
          gain.gain.linearRampToValueAtTime(0, now + ATTACK + RELEASE);

          osc.connect(gain).connect(convolver);
          osc.start(now);
          osc.stop(now + ATTACK + RELEASE + 0.2);

          oscillators.push(osc, vibrato);
          gainNodes.push(gain);
        });

        drawSpectrum();
        setTimeout(() => resolve(), (ATTACK + RELEASE + 0.2) * 1000);
      });
    }

    toggleBtn.onclick = () => {
      const f0 = parseFloat(freqInput.value);
      const partials = parsePartials(partialsInput.value);
      if (isPlaying || isNaN(f0) || !partials.length) return;
      startBell(f0, partials);
      isPlaying = true;
      toggleBtn.textContent = '‚è≥ –ó–≤—É–∫...';
      toggleBtn.classList.remove('btn-success');
      toggleBtn.classList.add('btn-secondary');
      setTimeout(() => {
        isPlaying = false;
        toggleBtn.textContent = '‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç';
        toggleBtn.classList.remove('btn-secondary');
        toggleBtn.classList.add('btn-success');
      }, 3500);
    };

    playSetBtn.onclick = async () => {
      if (isPlayingSet) {
        isPlayingSet = false;
        playSetBtn.textContent = 'üîî –ü—Ä–æ–∏–≥—Ä–∞—Ç—å –Ω–∞–±–æ—Ä';
        playSetBtn.classList.remove('btn-danger');
        playSetBtn.classList.add('btn-primary');
        return;
      }
      
      isPlayingSet = true;
      playSetBtn.textContent = '‚èπ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å';
      playSetBtn.classList.remove('btn-primary');
      playSetBtn.classList.add('btn-danger');
      
      const freqs = setFreqsInput.value.split(',')
        .map(v => parseFloat(v.trim()))
        .filter(v => !isNaN(v));
        
      if (freqs.length === 0) {
        isPlayingSet = false;
        playSetBtn.textContent = 'üîî –ü—Ä–æ–∏–≥—Ä–∞—Ç—å –Ω–∞–±–æ—Ä';
        playSetBtn.classList.remove('btn-danger');
        playSetBtn.classList.add('btn-primary');
        return;
      }
      
      const partials = parsePartials(partialsInput.value);
      if (partials.length === 0) {
        isPlayingSet = false;
        playSetBtn.textContent = 'üîî –ü—Ä–æ–∏–≥—Ä–∞—Ç—å –Ω–∞–±–æ—Ä';
        playSetBtn.classList.remove('btn-danger');
        playSetBtn.classList.add('btn-primary');
        return;
      }
      
      const hitDelay = parseInt(hitDelayInput.value) || 0;
      const cycleDelay = parseInt(cycleDelayInput.value) || 0;

      do {
        for (const freq of freqs) {
          if (!isPlayingSet) break;
          await startBell(freq, partials);
          if (!isPlayingSet) break;
          await new Promise(resolve => setTimeout(resolve, hitDelay));
        }
        if (!isPlayingSet) break;
        if (!loopCheckbox.checked) break;
        await new Promise(resolve => setTimeout(resolve, cycleDelay));
      } while (isPlayingSet && loopCheckbox.checked);
      
      isPlayingSet = false;
      playSetBtn.textContent = 'üîî –ü—Ä–æ–∏–≥—Ä–∞—Ç—å –Ω–∞–±–æ—Ä';
      playSetBtn.classList.remove('btn-danger');
      playSetBtn.classList.add('btn-primary');
    };
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∞—É–¥–∏–æ–±—É—Ñ–µ—Ä–∞ –≤ WAV
    function bufferToWav(buffer) {
    const numChannels = buffer.numberOfChannels;
    const sampleRate = buffer.sampleRate;
    const format = 3; // float
    const bitDepth = 32;
    const bytesPerSample = bitDepth / 8;
    const blockAlign = numChannels * bytesPerSample;
    
    const dataLength = buffer.length * numChannels * bytesPerSample;
    const bufferSize = 44 + dataLength;
    const arrayBuffer = new ArrayBuffer(bufferSize);
    const view = new DataView(arrayBuffer);
    
    // –ó–∞–ø–∏—Å—å –∑–∞–≥–æ–ª–æ–≤–∫–∞ WAV
    writeString(view, 0, 'RIFF');
    view.setUint32(4, 36 + dataLength, true);
    writeString(view, 8, 'WAVE');
    writeString(view, 12, 'fmt ');
    view.setUint32(16, 16, true);
    view.setUint16(20, format, true);
    view.setUint16(22, numChannels, true);
    view.setUint32(24, sampleRate, true);
    view.setUint32(28, sampleRate * blockAlign, true);
    view.setUint16(32, blockAlign, true);
    view.setUint16(34, bitDepth, true);
    writeString(view, 36, 'data');
    view.setUint32(40, dataLength, true);
    
    // –ó–∞–ø–∏—Å—å –∞—É–¥–∏–æ–¥–∞–Ω–Ω—ã—Ö
    let offset = 44;
    for (let i = 0; i < buffer.length; i++) {
    for (let ch = 0; ch < numChannels; ch++) {
    const sample = buffer.getChannelData(ch)[i];
    view.setFloat32(offset, sample, true);
    offset += 4;
    }
    }
    
    return new Blob([view], { type: 'audio/wav' });
    }
    
    function writeString(view, offset, string) {
    for (let i = 0; i < string.length; i++) {
    view.setUint8(offset + i, string.charCodeAt(i));
    }
    }
    
    function downloadWav(blob, filename) {
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    setTimeout(() => {
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    }, 100);
    }
    
    saveBtn.onclick = async () => {
    const freqs = setFreqsInput.value.split(',')
    .map(v => parseFloat(v.trim()))
    .filter(v => !isNaN(v));
    
    if (freqs.length === 0) {
    alert("–ù–∞–±–æ—Ä —á–∞—Å—Ç–æ—Ç –ø—É—Å—Ç. –î–æ–±–∞–≤—å—Ç–µ —á–∞—Å—Ç–æ—Ç—ã.");
    return;
    }
    
    const repeats = prompt("–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤ –Ω–∞–±–æ—Ä–∞ —á–∞—Å—Ç–æ—Ç:", "1");
    if (!repeats || isNaN(repeats) || parseInt(repeats) <= 0) {
    return;
    }
    const repeatCount = parseInt(repeats);
    
    let filenamePrefix = "";
    switch (instrumentSelect.value) {
    case "bell": filenamePrefix = "–ö–æ–ª–æ–∫–æ–ª"; break;
    case "bowl": filenamePrefix = "–ß–∞—à–∞"; break;
    case "smallbell": filenamePrefix = "–ö–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∏"; break;
    }
    
    const additionalName = prompt("–í–≤–µ–¥–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è —Ñ–∞–π–ª–∞:", "");
    const filename = (filenamePrefix ? filenamePrefix + "-" : "") + 
    (additionalName || "–∑–≤—É–∫") + ".wav";
    
    const partials = parsePartials(partialsInput.value);
    if (partials.length === 0) {
    alert("–û—à–∏–±–∫–∞: –Ω–µ –∑–∞–¥–∞–Ω—ã –æ–±–µ—Ä—Ç–æ–Ω–∞.");
    return;
    }
    
    const hitDelay = parseInt(hitDelayInput.value) || 0;
    const cycleDelay = parseInt(cycleDelayInput.value) || 0;
    const bellDuration = ATTACK + RELEASE + 0.2;
    const hitDelayInSeconds = hitDelay / 1000;
    const cycleDelayInSeconds = cycleDelay / 1000;
    
    const cycleDuration = freqs.length * bellDuration + 
    (freqs.length - 1) * hitDelayInSeconds + 
    cycleDelayInSeconds;
    const totalDuration = cycleDuration * repeatCount;
    
    const sampleRate = 44100;
    const offlineCtx = new OfflineAudioContext(2, totalDuration * sampleRate, sampleRate);
    
    const convolverBuffer = createImpulseResponse(offlineCtx);
    
    for (let repeat = 0; repeat < repeatCount; repeat++) {
    for (let i = 0; i < freqs.length; i++) {
    const startTime = repeat * cycleDuration + i * (bellDuration + hitDelayInSeconds);
    generateBellForOffline(offlineCtx, startTime, freqs[i], partials, convolverBuffer);
    }
    }
    
    try {
    const renderedBuffer = await offlineCtx.startRendering();
    const wavBlob = bufferToWav(renderedBuffer);
    downloadWav(wavBlob, filename);
    } catch (e) {
    console.error("–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:", e);
    alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞: " + e.message);
    }
    };
    
    function generateBellForOffline(ctx, startTime, f0, partials, convolverBuffer) {
    const convolver = ctx.createConvolver();
    convolver.buffer = convolverBuffer;
    
    const masterGain = ctx.createGain();
    masterGain.gain.value = 1.0;
    
    convolver.connect(masterGain);
    masterGain.connect(ctx.destination);
    
    partials.forEach(p => {
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    
    const vibrato = ctx.createOscillator();
    const vibratoGain = ctx.createGain();
    
    osc.type = 'sine';
    osc.frequency.value = f0 * p.ratio + (Math.random() * 2 - 1);
    
    vibrato.frequency.value = 5 + Math.random() * 2;
    vibratoGain.gain.value = 1 + Math.random();
    
    vibrato.connect(vibratoGain).connect(osc.frequency);
    
    gain.gain.setValueAtTime(0, startTime);
    gain.gain.linearRampToValueAtTime(MAX_VOLUME * p.amp, startTime + ATTACK);
    gain.gain.linearRampToValueAtTime(0, startTime + ATTACK + RELEASE);
    
    osc.connect(gain).connect(convolver);
    
    osc.start(startTime);
    osc.stop(startTime + ATTACK + RELEASE + 0.2);
    vibrato.start(startTime);
    vibrato.stop(startTime + ATTACK + RELEASE + 0.2);
    });
    }
    
  </script>
</body>
</html>